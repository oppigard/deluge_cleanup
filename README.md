
# Deluge Cleanup Tool

## Description
This tool connects to a Deluge daemon and removes torrents that exceed a specified ratio limit.  
You can also specify a list of trackers that are exempt from the ratio check.  
The program uses a `config.yaml` file, which can either be created manually or generated by providing arguments when running the script. The arguments will update the `config.yaml` file.

## Installation
The only requirements are Python 3.x and the `PyYAML` library. To install `PyYAML`, run the following command:
```bash
pip install pyyaml
```

## Usage
```bash
python deluge_cleanup.py --help
```
```
usage: deluge_cleanup.py [-h] [--host HOST] [--port PORT] [--user USER] [--password PASSWORD] [--ratio_limit RATIO_LIMIT]
                         [--container CONTAINER] [--allowed_trackers [ALLOWED_TRACKERS ...]] [--test] [-v {0,1,2,3}]

Manage Deluge torrents based on criteria.

options:
  -h, --help            Show this help message and exit.
  --host HOST           Deluge daemon host.
  --port PORT           Deluge daemon port.
  --user USER           Deluge daemon username.
  --password PASSWORD   Deluge daemon password.
  --ratio_limit RATIO_LIMIT
                        Ratio limit for stopping and removing torrents.
  --container CONTAINER
                        Docker container name running Deluge (leave blank if not using Docker).
  --allowed_trackers [ALLOWED_TRACKERS ...]
                        List of trackers to exempt from ratio checks.
  --test                Run in test mode (no changes will be made).
  -v {0,1,2,3}, --verbose {0,1,2,3}
                        Verbosity level: 0 for silent, 1 for minimal output, 2 for detailed, 3 for debug-level output.
```

## Example
Run the script with the following command to clean up torrents:
```bash
python deluge_cleanup.py --host localhost --port 58846 --container deluge --user john --password secret --ratio_limit 2.0 --allowed_trackers tracker1.org tracker2.org --test --verbose 1
```

Sample output in test mode:
```
Running in test mode. No changes will be made.
-----------------------------------
Total torrents                   66
Would be deleted                  0
-----------------------------------
Total skipped                    66
Due to ratio                      0
Allowed tracker (under limit)    66
Allowed tracker (over limit)      0
```

## Configuration File (`config.yaml`)
You can create a `config.yaml` file to store persistent configurations such as your host, port, user, password, ratio limit, and allowed trackers. Here's an example config.yaml:
```yaml
host: localhost
port: 58846
user: johndoe
password: secret
ratio_limit: 2.0
allowed_trackers:
  - tracker1.org
  - tracker2.org
```

The script will use values from `config.yaml` unless overridden by command-line arguments.
